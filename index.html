
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Eric O'Callaghan">
        <meta name="description" content="Water Table">
        <meta name="format-detection" content="telephone=no">
        <meta name="robots" content="noindex,nofollow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="Water Table">
        <meta property="og:title" content="Water Table">
        <title>Water Table</title>
        <script src="jquery-3.7.1.min.js"></script>
        <script src="moment/moment-with-locales.js"></script>
        <script src="moment/moment-timezone-with-data-10-year-range.min.js"></script>
        <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
        <link href="datatables/datatables.min.css" rel="stylesheet">
        <script src="datatables/datatables.min.js"></script>
    </head>
    <body class="container-fluid">
        <header class="header">
            <nav class="navbar navbar-dark navbar-expand navbar-expand-lg">
                <a class="btn btn-primary p-1 navbar-brand nav-link" href="#" onclick="document.location.reload()">
                    ðŸ’§ Water Table ðŸš°
                </a>
            </nav>
        </header>
        <main class="container-fluid">
            <table class="display table table-hover table-sm table-striped" id="waterTable">
                <thead>
                    <tr>
                        <th class="text-primary" title="Date">Date</th>
                        <th class="text-primary" title="Gallons">Gallons</th>
                    </tr>
                </thead>
                <tbody class="table-group-divider">
                </tbody>
            </table>
            <script>
                new DataTable('#waterTable', {
                    ajax: {
                        url: 'water.json',
                        dataSrc: ''
                    },
                    columns: [
                        {
                            data: 'Date',
                            render: function (data, type) {
                                let momentData = new moment.tz(data, 'America/New_York')
                                if (type === 'display') {
                                    let momentDT = momentData.format()
                                    let momentDisplay = momentData.format('dddd, MMMM Do, YYYY')
                                    let momentTitle = `${momentDisplay} (${momentDT})`
                                    return `<time datetime="${momentDT}"><span title="${momentTitle}">${momentDisplay}</span></time>`
                                }
                                return momentData
                            },
                            type: 'moment',
                        },
                        {
                            data: 'Gallons',
                            render: function (data, type) {
                                if (type === 'display') {
                                    let gallonText = 'primary-emphasis'
                                    if (data > 100) {
                                        gallonText = 'danger-emphasis'
                                    } else if (data > 75) {
                                        gallonText = 'warning-emphasis'
                                    } else if (data > 50) {
                                        gallonText = 'info-emphasis'
                                    }
                                    return `<b class="font-monospace text-${gallonText}" title="${data} gallons">${data}</b>`
                                }
                                return data
                            },
                            type: 'num',
                        }
                    ],
                    language: {
                        'emptyTable': '<b class="text-primary">No days available in table</b>',
                        'info': '<b class="text-primary">Showing _START_ to _END_ of _TOTAL_ days</b>',
                        'infoEmpty': '<b class="text-primary">Showing 0 to 0 of 0 days</b>',
                        'infoFiltered': '<b class="text-primary">(filtered from _MAX_ total days)</b>',
                        'lengthMenu': '<b class="text-primary">_MENU_ days</b>',
                        'zeroRecords': '<b class="text-primary">No matching days found</b>',
                        searchBuilder: { title: '<b class="text-primary">Search</b>' }
                    },
                    layout: {
                        topStart: 'searchBuilder',
                        topEnd: {
                            buttons: ['csvHtml5', 'excelHtml5', 'print']
                        },
                        bottomStart: 'pageLength',
                        bottom: 'paging',
                        bottomEnd: 'info'
                    },
                    lengthMenu: [
                        5, {label: '10 (default)', value: 10},
                        15, 20, 25, 50, 75, 100, {label: 'all', value: -1}
                    ],
                    order: [[0, 'desc']],
                    pageLength: 10,
                    searchBuilder: {depthLimit: 1},
                })
            </script>

        </main>
    </body>
</html>
